<title>Mental Health Book List</title>
<link rel="stylesheet" href="https://cdn.datatables.net/2.0.5/css/dataTables.dataTables.min.css" />
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/2.0.5/js/dataTables.min.js"></script>

<script>
    $(document).ready(function () {
        fetch('./data/books.json')
            .then(response => response.json())
            .then(data => {
                $('#myTable').DataTable({
                    data: data,
                    columns: [
                        {
                            data: 'Topic', render: function (data, type, row) {
                                if (Array.isArray(data) && data.length > 0) {
                                    return data.join(', ');
                                } else {
                                    return '';
                                }
                            }
                        },
                        {
                            data: 'Picture', render: function (data, type, row) {
                                return data ? '<img src="' + data + '" style="width:100px; height:auto;">' : '';
                            }
                        },
                        {
                            data: 'Title', render: function (data, type, row) {
                                return data ? '<a href="' + row['Link to GoodReads'] + '" target="_blank">' + data : '';
                            }
                        },
                        { data: 'Author' },
                        {
                            data: 'Age Range', render: function (data, type, row) {
                                if (Array.isArray(data) && data.length > 0) {
                                    return data[0] + ' - ' + data[data.length - 1];
                                } else {
                                    return '';
                                }
                            }
                        },
                        {
                            data: 'Language', render: function (data, type, row) {
                                if (Array.isArray(data) && data.length > 0) {
                                    return data.join(', ');
                                } else {
                                    return '';
                                }
                            }
                        },
                        { data: 'Number of Times Recommended' },
                        {
                            data: 'Who Recommended', render: function (data, type, row) {
                                if (Array.isArray(data) && data.length > 0) {
                                    return data.join(', ');
                                } else {
                                    return '';
                                }
                            }
                        }
                    ]
                });
            })
            .catch(error => console.error('Error fetching data:', error));
    });

</script>

<table id="myTable" class="display">
    <thead>
        <tr>
            <th>Topic</th>
            <th>Picture</th>
            <th>Title</th>
            <th>Author</th>
            <th>Age Range</th>
            <th>Language</th>
            <th>Number of Times Recommended</th>
            <th>Who Recommended</th>
        </tr>
    </thead>
</table>